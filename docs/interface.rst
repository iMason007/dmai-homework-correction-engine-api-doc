************************************************
接口描述
************************************************

.. contents:: 目录

1. 新增题库数据
======================================
1.1. 接口功能
--------------------------------------
新增题库中的教辅标注数据

1.2. 请求方式
--------------------------------------
POST http://am-daip.dev.dm-ai.cn/api/v1/subject

1.3. 请求参数说明
--------------------------------------
1.3.1. 请求头部(HTTP Header)

+--------------+--------------+--------------+----------------------------------------+
|    字段名    |   是否必选   |   数据类型   | 描述                                   |
+==============+==============+==============+========================================+
| token        | 是           | String       | 联系DM技术支持获得                     |
+--------------+--------------+--------------+----------------------------------------+

1.3.2. 请求体(Content-Type: JSON)

+---------------+---------------+---------------+----------------------------------------+
| 字段名        | 是否必选      | 数据类型      | 描述                                   |
+===============+===============+===============+========================================+
| cid           | 是            | String        | 科目id                                 |
+---------------+---------------+---------------+----------------------------------------+
| gid           | 是            | Int           | 年级id, 1~9代表1~9年级                 |
+---------------+---------------+---------------+----------------------------------------+
| bid           | 是            | String        | 书本id                                 |
+---------------+---------------+---------------+----------------------------------------+
| pid           | 是            | Int           | 题目所在的页码                         |
+---------------+---------------+---------------+----------------------------------------+
| question      | 是            | JSONArray     | 题目对象数组, 一个对象对应一道题目数据 |
+---------------+---------------+---------------+----------------------------------------+
| image         | 是            | String        | image base64编码                       |
+---------------+---------------+---------------+----------------------------------------+

1.4. 正确请求示例
--------------------------------------
.. code-block::

    token: Tfbzvepj0rrpwkbPhm9CuhIe6jtiCDth
    --------------------------------------
    {
        "cid": "5e1484a550ed1d14e8a09eed",
        "gid": 6,
        "bid": "5e1484a550ed1d14e8a09eed",
        "pid": 101,
        "question": [{....},{...}],
        "image": "/9j/4AAQSkZJRgABAQAAAQABAAD..."
    }

1.5. 返回数据说明(Content-type: JSON)
--------------------------------------

+---------------+---------------------+---------------+--------------------------------------------------------+
| 字段名        | 是否必选            | 数据类型      | 说明                                                   |
+===============+=====================+===============+========================================================+
| code          | 是                  | Int           | code为0时, 业务正常, code不为0时, 业务出错             |
+---------------+---------------------+---------------+--------------------------------------------------------+
| data          | 否(code为0时返回)   | String        | 输出"数据新增成功"                                     |
+---------------+---------------+---------------+--------------------------------------------------------------+
| error         | 否(code不为0时返回) | String        | 当code不为0时, 输出 "没有该字信息, 请重新选择测试图片" |
+---------------+---------------+---------------+--------------------------------------------------------------+

1.6. 正确返回示例
--------------------------------------
.. code-block::

    {
        "code": 0,
        "data": "数据新增成功"
    }

1.7. 错误返回示例
--------------------------------------
.. code-block::

    {
        "code": 401,
        "error": "invalid token"
    }

1.8. 错误码
--------------------------------------
+----------+------------------------------------------------+------------------------+
| 错误码   | 说明                                           | 修复方法               |
+==========+================================================+========================+
| 400      | 索引对应的题库已存在                           |                        |
+----------+------------------------------------------------+------------------------+
| 401      | 鉴权失败                                       | 联系DM技术支持获取dmid |
+----------+------------------------------------------------+------------------------+
| 416      | 非法输入(输入数据与请求体定义不同)             |                        |
+----------+------------------------------------------------+------------------------+
| 501      | 数据入库失败(数据库连接失败, 数据库操作异常等) |                        |
+----------+------------------------------------------------+------------------------+
| 1101     | 获取特征向量失败                               |                        |
+----------+------------------------------------------------+------------------------+
| 1102     | 添加题目特征向量失败                           |                        |
+----------+------------------------------------------------+------------------------+

2. 查询题库数据
======================================
2.1. 接口功能
--------------------------------------
获取题库中的教辅标注数据

2.2. 请求方式
--------------------------------------
GET http://am-daip.dev.dm-ai.cn/api/v1/subject

2.3. 请求参数说明
--------------------------------------
2.3.1. 请求头部(HTTP Header)

+--------------+--------------+--------------+----------------------------------------+
|    字段名    |   是否必选   |   数据类型   | 描述                                   |
+==============+==============+==============+========================================+
| token        | 是           | String       | 联系DM技术支持获得                     |
+--------------+--------------+--------------+----------------------------------------+

2.3.2. 请求参数(Query)

+---------------+---------------+---------------+----------------------------------------+
| 字段名        | 是否必选      | 数据类型      | 描述                                   |
+===============+===============+===============+========================================+
| cid           | 是            | String        | 科目id                                 |
+---------------+---------------+---------------+----------------------------------------+
| gid           | 是            | Int           | 年级id, 1~9代表1~9年级                 |
+---------------+---------------+---------------+----------------------------------------+
| bid           | 是            | String        | 书本id                                 |
+---------------+---------------+---------------+----------------------------------------+
| pid           | 是            | Int           | 题目所在的页码                         |
+---------------+---------------+---------------+----------------------------------------+

2.4. 正确请求示例
--------------------------------------
.. code-block::

    token: Tfbzvepj0rrpwkbPhm9CuhIe6jtiCDth
    --------------------------------------
    /api/v1/subject?cid=5e1484a550ed1d14e8a09eed&gid=6&bid=5e1484a550ed1d14e8a09eed&pid=101

2.5. 返回数据说明(Content-type: JSON)
--------------------------------------

+---------------+---------------------+---------------+--------------------------------------------------------+
| 字段名        | 是否必选            | 数据类型      | 说明                                                   |
+===============+=====================+===============+========================================================+
| code          | 是                  | Int           | code为0时, 业务正常, code不为0时, 业务出错             |
+---------------+---------------------+---------------+--------------------------------------------------------+
| data          | 否(code为0时返回)   | JSONObject    | 具体的返回数据(见data字段说明)                         |
+---------------+---------------+---------------+--------------------------------------------------------------+
| error         | 否(code不为0时返回) | String        | 当code不为0时, 输出 "没有该字信息, 请重新选择测试图片" |
+---------------+---------------+---------------+--------------------------------------------------------------+

data字段说明

+---------------+---------------+--------------------------------------------------------+
| 字段名        | 数据类型      | 说明                                                   |
+===============+===============+========================================================+
| data          | JSONArray     | 标注题目数据                                           |
+---------------+---------------+--------------------------------------------------------+
| error         | String        | 题目图片的BASE64编码                                   |
+---------------+---------------+--------------------------------------------------------+

2.6. 正确返回示例
--------------------------------------
.. code-block::

    {
        "code":0,
        "data":[{
            "question":[{....},{...}],
            "image":"/9j/4AAQSkZJRgABAQAAAQABAAD..."
        }]
    }

2.7. 错误返回示例
--------------------------------------
.. code-block::

    {
        "code": 401,
        "error": "invalid token"
    }

2.8. 错误码
--------------------------------------
+----------+------------------------------------------------+------------------------+
| 错误码   | 说明                                           | 修复方法               |
+==========+================================================+========================+
| 401      | 鉴权失败                                       | 联系DM技术支持获取dmid |
+----------+------------------------------------------------+------------------------+
| 404      | 数据库检索不到对应数据                         |                        |
+----------+------------------------------------------------+------------------------+
| 416      | 非法输入(输入数据与请求体定义不同)             |                        |
+----------+------------------------------------------------+------------------------+
| 501      | 数据查询失败(数据库连接失败, 数据库操作异常等) |                        |
+----------+------------------------------------------------+------------------------+

3. 修改题库数据
======================================
3.1. 接口功能
--------------------------------------
获取题库中的教辅标注数据

2.2. 请求方式
--------------------------------------
GET http://am-daip.dev.dm-ai.cn/api/v1/subject

2.3. 请求参数说明
--------------------------------------
2.3.1. 请求头部(HTTP Header)

+--------------+--------------+--------------+----------------------------------------+
|    字段名    |   是否必选   |   数据类型   | 描述                                   |
+==============+==============+==============+========================================+
| token        | 是           | String       | 联系DM技术支持获得                     |
+--------------+--------------+--------------+----------------------------------------+

2.3.2. 请求参数(Query)

+---------------+---------------+---------------+----------------------------------------+
| 字段名        | 是否必选      | 数据类型      | 描述                                   |
+===============+===============+===============+========================================+
| cid           | 是            | String        | 科目id                                 |
+---------------+---------------+---------------+----------------------------------------+
| gid           | 是            | Int           | 年级id, 1~9代表1~9年级                 |
+---------------+---------------+---------------+----------------------------------------+
| bid           | 是            | String        | 书本id                                 |
+---------------+---------------+---------------+----------------------------------------+
| pid           | 是            | Int           | 题目所在的页码                         |
+---------------+---------------+---------------+----------------------------------------+

2.4. 正确请求示例
--------------------------------------
.. code-block::

    token: Tfbzvepj0rrpwkbPhm9CuhIe6jtiCDth
    --------------------------------------
    /api/v1/subject?cid=5e1484a550ed1d14e8a09eed&gid=6&bid=5e1484a550ed1d14e8a09eed&pid=101

2.5. 返回数据说明(Content-type: JSON)
--------------------------------------

+---------------+---------------------+---------------+--------------------------------------------------------+
| 字段名        | 是否必选            | 数据类型      | 说明                                                   |
+===============+=====================+===============+========================================================+
| code          | 是                  | Int           | code为0时, 业务正常, code不为0时, 业务出错             |
+---------------+---------------------+---------------+--------------------------------------------------------+
| data          | 否(code为0时返回)   | JSONObject    | 具体的返回数据(见data字段说明)                         |
+---------------+---------------+---------------+--------------------------------------------------------------+
| error         | 否(code不为0时返回) | String        | 当code不为0时, 输出 "没有该字信息, 请重新选择测试图片" |
+---------------+---------------+---------------+--------------------------------------------------------------+

data字段说明

+---------------+---------------+--------------------------------------------------------+
| 字段名        | 数据类型      | 说明                                                   |
+===============+===============+========================================================+
| data          | JSONArray     | 标注题目数据                                           |
+---------------+---------------+--------------------------------------------------------+
| error         | String        | 题目图片的BASE64编码                                   |
+---------------+---------------+--------------------------------------------------------+

2.6. 正确返回示例
--------------------------------------
.. code-block::

    {
        "code":0,
        "data":[{
            "question":[{....},{...}],
            "image":"/9j/4AAQSkZJRgABAQAAAQABAAD..."
        }]
    }

2.7. 错误返回示例
--------------------------------------
.. code-block::

    {
        "code": 401,
        "error": "invalid token"
    }

2.8. 错误码
--------------------------------------
+----------+------------------------------------------------+------------------------+
| 错误码   | 说明                                           | 修复方法               |
+==========+================================================+========================+
| 401      | 鉴权失败                                       | 联系DM技术支持获取dmid |
+----------+------------------------------------------------+------------------------+
| 404      | 数据库检索不到对应数据                         |                        |
+----------+------------------------------------------------+------------------------+
| 416      | 非法输入(输入数据与请求体定义不同)             |                        |
+----------+------------------------------------------------+------------------------+
| 501      | 数据查询失败(数据库连接失败, 数据库操作异常等) |                        |
+----------+------------------------------------------------+------------------------+